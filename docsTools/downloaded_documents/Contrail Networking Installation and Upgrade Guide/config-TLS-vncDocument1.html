<p id="topic-content"><h1 id="jd0e2">Configuring Transport Layer Security-Based XMPP in Contrail</h1><sw-topic-details date="2019-04-03"> </sw-topic-details><h2 id="jd0e10">Overview: TLS-Based XMPP </h2><p>Transport Layer Security (TLS)-based XMPP can be
used to secure all Extensible Messaging and Presence Protocol (XMPP)-based
communication that occurs in the Contrail environment.</p><p>Secure XMPP is based on <cite>RFC 6120, Extensible Messaging
and Presence Protocol (XMPP): Core</cite>.</p><h3 id="jd0e20">TLS XMPP in Contrail</h3><p>In the Contrail environment, the Transport Layer Security (TLS)
protocol is used for certificate exchange, mutual authentication,
and negotiating ciphers to secure the stream from potential tampering
and eavesdropping.  </p><p>The RFC 6120 highlights a basic stream message exchange format
for TLS negotiation between an XMPP server and an XMPP client. </p><sw-admonition name="note" style=""><strong class="title">Note</strong><p>Simple Authentication and Security Layer (SASL) authentication
is not supported in the Contrail environment.</p></sw-admonition><h2 id="jd0e30">Configuring XMPP Client and Server in Contrail</h2><p>In the Contrail environment, XMPP based communications are used
in client and server exchanges, between the compute node (as the XMPP
client), and:</p><ul><li style=""><p>the control node (as the XMPP server)</p></li><li style=""><p>the DNS server (as the XMPP server)</p></li></ul><h3 id="jd0e43">Configuring Control Node for XMPP Server</h3><p>To enable secure XMPP, the following parameters are configured
at the XMPP server. </p><p>On the control node, enable the parameters in the configuration
file: <br/><code class="inline" v-pre="">/etc/contrail/contrail-control.conf</code>.</p><sw-table><table cellspacing="0" style="border-top:thin solid black;" width="99%"><thead><tr valign="bottom"><th align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Parameter</p></th><th align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Description</p></th><th align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Default</p></th></tr></thead><tbody><tr valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">xmpp_server_cert</code></p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Path to the node's public certificate</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">/etc/contrail/ssl/certs/server.pem</code></p></td></tr><tr class="row-with-bg" valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">xmpp_server_key</code></p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Path to server's or node's private key</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">/etc/contrail/ssl/private/server-privkey.pem</code></p></td></tr><tr valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">xmpp_ca_cert</code></p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Path to CA certificate</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">/etc/contrail/ssl/certs/ca-cert.pem</code></p></td></tr><tr class="row-with-bg" valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">xmpp_auth_enable=true</code></p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Enables SSL based XMPP </p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Default is set to false, XMPP is disabled. </p><p><b>Note:
					</b>The keyword <code class="inline" v-pre="">true</code> is case sensitive.</p></td></tr></tbody></table></sw-table><h3 id="jd0e125">Configuring DNS Server for XMPP Server</h3><p>To enable secure XMPP, the following parameters are configured
at the XMPP DNS server. </p><p>On the DNS server control node, enable the parameters in the
configuration file:<br/><code class="inline" v-pre="">/etc/contrail/contrail-control.conf</code></p><sw-table><table cellspacing="0" style="border-top:thin solid black;" width="99%"><thead><tr valign="bottom"><th align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Parameter</p></th><th align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Description</p></th><th align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Default</p></th></tr></thead><tbody><tr valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">xmpp_server_cert</code></p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Path to the node's public certificate</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">/etc/contrail/ssl/certs/server.pem</code></p></td></tr><tr class="row-with-bg" valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">xmpp_server_key</code></p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Path to server's/node's private key</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">/etc/contrail/ssl/certs/server-privkey.pem</code></p></td></tr><tr valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">xmpp_ca_cert</code></p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Path to CA certificate</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">/etc/contrail/ssl/certs/ca-cert.pem</code></p></td></tr><tr class="row-with-bg" valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">xmpp_dns_auth_enable=true</code></p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Enables SSL based XMPP </p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Default is set to false, XMPP is disabled. </p><p><b>Note:
					</b>The keyword <code class="inline" v-pre="">true</code> is case sensitive.</p></td></tr></tbody></table></sw-table><h3 id="jd0e205">Configuring Control Node for XMPP Client</h3><p>To enable secure XMPP, the following parameters are configured
at the XMPP client.</p><p>On  the compute node, enable the parameters in the configuration
file:<br/><code class="inline" v-pre=""> /etc/contrail/contrail-vrouter-agent.conf</code></p><sw-table><table cellspacing="0" style="border-top:thin solid black;" width="99%"><thead><tr valign="bottom"><th align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Parameter</p></th><th align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Description</p></th><th align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Default</p></th></tr></thead><tbody><tr valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">xmpp_server_cert</code></p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Path to the node's public certificate</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">/etc/contrail/ssl/certs/server.pem</code></p></td></tr><tr class="row-with-bg" valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">xmpp_server_key</code></p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Path to server's/node's private key</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">/etc/contrail/ssl/private/server-privkey.pem</code></p></td></tr><tr valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">xmpp_ca_cert</code></p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Path to CA certificate</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">/etc/contrail/ssl/certs/ca-cert.pem</code></p></td></tr><tr class="row-with-bg" valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">xmpp_auth_enable=true  xmpp_dns_auth_enable=true</code></p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Enables SSL based XMPP </p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Default is set to false, XMPP is disabled. </p><p><b>Note:
					</b>The keyword <code class="inline" v-pre="">true</code> is case sensitive.</p></td></tr></tbody></table></sw-table><sw-prev-next> </sw-prev-next></p>